<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en-us" }}">
<head>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic {{ .Site.Data.academic.version }}">
  {{ hugo.Generator }}

  {{ $scr := .Scratch }}

  {{/* Attempt to load superuser. */}}
  {{ $superuser_name := "" }}
  {{ $superuser_username := "" }}
  {{ $superuser_role := "" }}
  {{ range first 1 (where (where $.Site.Pages "Section" "author") "Params.superuser" true) }}
    {{ $superuser_name = .Params.name }}
    {{ $superuser_username = delimit (last 1 (split (substr .File.Dir 0 -1) "/")) "" }}
    {{ $superuser_role = .Params.role }}
  {{ end }}
  {{ $scr.Set "superuser_username" $superuser_username }}{{/* For access from page_author.html. */}}

  {{ with $superuser_name }}<meta name="author" content="{{ . }}">{{ end }}

  {{/* Generate page description. */}}
  {{ $desc := "" }}
  {{ if .Params.summary }}
    {{ $desc = .Params.summary }}
  {{ else if .Params.abstract }}
    {{ $desc = .Params.abstract }}
  {{ else if .IsPage }}
    {{ $desc = .Summary }}
  {{ else if .Site.Params.description }}
    {{ $desc = .Site.Params.description }}
  {{ else }}
    {{ $desc = $superuser_role }}
  {{ end }}
  <meta name="description" content="{{ $desc }}">

  {{ range .Translations }}
  <link rel="alternate" hreflang="{{ .Lang }}" href="{{ .Permalink }}">
  {{ end }}
  <link rel="alternate" hreflang="{{ .Site.LanguageCode | default "en-us" }}" href="{{ .Permalink }}">

  {{ partial "css/parse_theme.css" . }}
  {{ $css := .Site.Data.assets.css }}
  {{ $js := .Site.Data.assets.js }}
  {{ if ne ($scr.Get "primary") "#fff" }}
  <meta name="theme-color" content="#00539f">
  {{ end }}

  {{/* Attempt to load local vendor CSS, otherwise load from CDN. */}}
  {{ $scr.Set "vendor_css_filename" "main.min.css" }}
  {{ $scr.Set "vendor_js_filename" "main.min.js" }}
  {{ if and (fileExists (printf "static/css/vendor/%s" ($scr.Get "vendor_css_filename"))) (fileExists (printf "static/js/vendor/%s" ($scr.Get "vendor_js_filename"))) }}
    {{ $scr.Set "use_cdn" 0 }}
    <link rel="stylesheet" href="{{ printf "/css/vendor/%s" ($scr.Get "vendor_css_filename") | relURL }}">
  {{ else }}
    {{ $scr.Set "use_cdn" 1 }}
    {{ printf "<link rel=\"stylesheet\" href=\"%s\" integrity=\"%s\" crossorigin=\"anonymous\">" (printf $css.bootstrap.url $css.bootstrap.version) $css.bootstrap.sri | safeHTML }}
    {{ printf "<link rel=\"stylesheet\" href=\"%s\" integrity=\"%s\" crossorigin=\"anonymous\">" (printf $css.academicons.url $css.academicons.version) $css.academicons.sri | safeHTML }}
    {{ printf "<link rel='preload' href='%s' as='style' onload='this.onload=null;this.rel=\"stylesheet\"' integrity='%s' crossorigin='anonymous'>" (printf $css.fontAwesome.url $css.fontAwesome.version) $css.fontAwesome.sri | safeHTML }}
    <noscript>{{ printf "<link rel='stylesheet' href='%s' integrity='%s' crossorigin='anonymous'>" (printf $css.fontAwesome.url $css.fontAwesome.version) $css.fontAwesome.sri | safeHTML }}</noscript>
    {{ printf "<link rel='preload' href='%s' as='style' onload='this.onload=null;this.rel=\"stylesheet\"' integrity='%s' crossorigin='anonymous'>" (printf $css.fancybox.url $css.fancybox.version) $css.fancybox.sri | safeHTML }}
    <noscript>{{ printf "<link rel='stylesheet' href='%s' integrity='%s' crossorigin='anonymous'>" (printf $css.fancybox.url $css.fancybox.version) $css.fancybox.sri | safeHTML }}</noscript>

    {{/* Default to enabling highlighting, but allow the user to override it in .Params or .Site.Params.
         Use $scr to store "highlight_enabled", so that we can read it again in footer.html. */}}
    {{ $scr.Set "highlight_enabled" true }}
    {{ if isset .Params "highlight" }}
      {{ $scr.Set "highlight_enabled" .Params.highlight }}
    {{ else if isset .Site.Params "highlight" }}
      {{ $scr.Set "highlight_enabled" .Site.Params.highlight }}
    {{ end }}
    {{ if ($scr.Get "highlight_enabled") }}
      {{ $v := $css.highlight.version }}
      {{ with .Site.Params.highlight_style }}
        {{ printf "<link rel=\"stylesheet\" href=\"%s\" crossorigin=\"anonymous\">" (printf $css.highlight.url $css.highlight.version .) | safeHTML }}
      {{ else }}
        {{ if eq ($scr.Get "light") true }}
          {{ printf "<link rel=\"stylesheet\" href=\"%s\" crossorigin=\"anonymous\" title=\"hl-light\">" (printf $css.highlight.url $css.highlight.version "github") | safeHTML }}
          {{ printf "<link rel=\"stylesheet\" href=\"%s\" crossorigin=\"anonymous\" title=\"hl-dark\" disabled>" (printf $css.highlight.url $css.highlight.version "dracula") | safeHTML }}
        {{ else }}
          {{ printf "<link rel=\"stylesheet\" href=\"%s\" crossorigin=\"anonymous\" title=\"hl-light\" disabled>" (printf $css.highlight.url $css.highlight.version "github") | safeHTML }}
          {{ printf "<link rel=\"stylesheet\" href=\"%s\" crossorigin=\"anonymous\" title=\"hl-dark\">" (printf $css.highlight.url $css.highlight.version "dracula") | safeHTML }}
        {{ end }}
      {{ end }}
    {{ end }}

    {{ if .Site.Params.custom_css }}
  {{ range .Site.Params.custom_css }}
    <link rel="stylesheet" href="{{ "css/" | relURL }}{{ . }}">
  {{ end }}
{{ end }}

    {{ if or (eq .Site.Params.map 2) (eq .Site.Params.map 3) }}
    {{ printf "<link rel=\"stylesheet\" href=\"%s\" integrity=\"%s\" crossorigin=\"anonymous\">" (printf $css.leaflet.url $css.leaflet.version) $css.leaflet.sri | safeHTML }}
    {{ end }}

    {{ if eq .Site.Params.search.engine 2 }}
      {{ printf "<link rel=\"stylesheet\" href=\"%s\" integrity=\"%s\" crossorigin=\"anonymous\">" (printf $css.instantsearch.url $css.instantsearch.version) $css.instantsearch.sri | safeHTML }}
      {{ printf "<link rel=\"stylesheet\" href=\"%s\" integrity=\"%s\" crossorigin=\"anonymous\">" (printf $css.instantsearchTheme.url $css.instantsearchTheme.version) $css.instantsearchTheme.sri | safeHTML }}
    {{ end }}

  {{ end }}

  {{/* We cannot use SRI with Google Fonts because the CSS is dynamically generated according to the user agent. */}}
  {{ with ($scr.Get "google_fonts") }}
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&display=swap">
</noscript>
  {{ end }}

  <link rel="stylesheet" href="{{ "styles.css" | relLangURL }}">
  {{ if .Site.Params.plugins_css }}
    {{ $css_comment := printf "/* Source Themes Academic v%s | https://sourcethemes.com/academic/ */\n" .Site.Data.academic.version }}
    {{ $css_bundle_head := $css_comment | resources.FromString "css/bundle-head.css" }}
    {{ $css_bundle := slice }}
    {{ range .Site.Params.plugins_css }}
      {{ $css_bundle = $css_bundle | append (resources.Get (printf "css/%s.css" .)) }}
    {{ end }}
    {{ $css_bundle := $css_bundle | resources.Concat "css/academic-bundle-pre.css" | minify }}
    {{ $css_bundle := slice $css_bundle_head $css_bundle | resources.Concat "css/academic.css" | minify | fingerprint "md5" }}
    <link rel="stylesheet" href="{{ $css_bundle.RelPermalink }}" integrity="{{ $css_bundle.Data.Integrity }}">
  {{ end }}

  {{ if not hugo.IsServer }}
  {{ if .Site.Config.Services.GoogleAnalytics.ID }}
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', '{{ .Site.Config.Services.GoogleAnalytics.ID }}', 'auto');
      {{ if .Site.Params.privacy_pack }}ga('set', 'anonymizeIp', true);{{ end }}
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    {{ if ($scr.Get "use_cdn") }}
    {{ printf "<script async src=\"%s\" integrity=\"%s\" crossorigin=\"anonymous\"></script>" (printf $js.autotrack.url $js.autotrack.version) $js.autotrack.sri | safeHTML }}
    {{ end }}
  {{ end }}
  {{ end }}

{{ with .OutputFormats.Get "RSS" }}
  <link rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" href="{{ .Permalink }}">
{{ end }}

  <link rel="icon" type="image/png" sizes="16x16" href="{{ "/img/favicon-16x16.png" | relURL }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ "/img/favicon-32x32.png" | relURL }}">
  <link rel="icon" type="image/png" sizes="48x48" href="{{ "/img/favicon-48x48.png" | relURL }}">
  <link rel="icon" type="image/png" sizes="64x64" href="{{ "/img/favicon-64x64.png" | relURL }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ "/img/favicon-180x180.png" | relURL }}">
  <link rel="icon" type="image/png" sizes="192x192" href="{{ "/img/favicon-192x192.png" | relURL }}">
  <link rel="icon" type="image/png" sizes="512x512" href="{{ "/img/favicon-512x512.png" | relURL }}">
  <link rel="manifest" href="{{ "site.webmanifest" | relURL }}">

  <link rel="canonical" href="{{ .Permalink }}">

  <meta property="og:site_name" content="{{ .Site.Title }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:title" content="{{ if not .IsHome }}{{ .Title }} | {{ end }}{{ .Site.Title }}">
  <meta property="og:description" content="{{ $desc }}">
  <meta property="og:image" content="{{ (printf "img/%s" $.Site.Params.avatar) | absURL }}">
  <meta property="og:locale" content="{{ .Site.LanguageCode | default "en-us" }}">

  <meta name="twitter:card" content="summary">
  {{ with .Site.Params.twitter }}
  <meta name="twitter:site" content="@{{ . }}">
  <meta name="twitter:creator" content="@{{ . }}">
  {{ end }}
  <meta name="twitter:title" content="{{ if not .IsHome }}{{ .Title }} | {{ end }}{{ .Site.Title }}">
  <meta name="twitter:description" content="{{ $desc }}">
  <meta name="twitter:image" content="{{ (printf "img/%s" $.Site.Params.avatar) | absURL }}">

  {{ partial "cookie_consent" . }}
  {{ partial "head_custom" . }}

  <title>{{ if not .IsHome }}{{ .Title }} | {{ end }}{{ .Site.Title }}</title>

  <style>
    /* Skip to main content link for accessibility */
    .skip-to-main {
      position: absolute;
      left: -9999px;
      z-index: 999;
      padding: 1em;
      background-color: var(--accent-color, #00539f);
      color: white;
      text-decoration: none;
      border-radius: 0 0 4px 0;
    }
    .skip-to-main:focus {
      left: 0;
      top: 0;
    }
  </style>

</head>
<body id="top" data-spy="scroll" data-target="{{ if or .IsHome .Params.widgets }}#navbar-main{{ else }}#TableOfContents{{ end }}" data-offset="71" {{ if not ($scr.Get "light") }}class="dark"{{ end }}>
  <a href="#main-content" class="skip-to-main">Skip to main content</a>
  {{ partial "search" . }}

</body>
</html>
